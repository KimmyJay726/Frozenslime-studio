<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frozenslime Studio</title>
    <!-- Use Tailwind CSS for a clean, responsive design -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            /* Full viewport size and background from the CodePen */
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/1197275/oceanBackdrop.jpg);
            background-size: cover;
            background-repeat: no-repeat;
            font-family: 'Inter', sans-serif;
            position: relative; /* Needed for z-index to work */
            transition: background-color 0.3s ease-in-out;
        }

        body.dark {
            background: #111827; /* Dark background color for dark mode */
        }

        /* Container for the fish animation, placed behind all content */
        #tank {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
        }

        /* Styles for the individual fish schools and fish */
        .school {
            position: absolute;
            top: 50%;
            left: 50%;
        }

        .fish {
            position: absolute;
        }
        
        /* Custom styles for the images */
        .image-item {
            cursor: pointer;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            transform-origin: center;
        }

        .image-item:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        /* Styles for the modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.9);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            margin: auto;
            display: block;
            max-width: 90%;
            max-height: 90%;
            animation-name: zoom;
            animation-duration: 0.6s;
        }

        @keyframes zoom {
            from {transform: scale(0.5)}
            to {transform: scale(1)}
        }

        .close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
        }

        .close:hover,
        .close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }

    </style>
</head>
<body class="p-8">

    <!-- Transparent Top Bar with Logo, Title, and Light/Dark Mode Toggle -->
    <header class="fixed top-0 left-0 right-0 p-4 z-50 flex justify-between items-center bg-transparent">
        <div class="flex items-center space-x-2">
            <!-- Site Logo (using an emoji as a simple placeholder) -->
            <span class="text-3xl">ðŸŽ¨</span>
            <!-- Site Title -->
            <h1 class="text-2xl font-bold text-gray-900 dark:text-white transition-colors duration-300">My Gallery</h1>
        </div>
        <!-- Light/Dark Mode Toggle Button -->
        <button id="theme-toggle" class="p-2 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-300 focus:outline-none">
            <!-- Sun icon for light mode, Moon icon for dark mode -->
            <svg id="sun-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
            </svg>
            <svg id="moon-icon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
            </svg>
        </button>
    </header>

    <!-- Container for the animated fish tank -->
    <!-- This div will contain the fish and will be the background -->
    <div id="tank"></div>

    <!-- Gallery Container -->
    <div class="max-w-7xl mx-auto relative z-10 p-4 rounded-xl bg-white bg-opacity-70 dark:bg-gray-800 dark:bg-opacity-80 shadow-2xl mt-20 transition-colors duration-300">
        <h1 class="text-4xl font-extrabold text-gray-800 dark:text-white text-center mb-8">My Art Gallery</h1>
        <div id="gallery-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            <!-- Images will be dynamically added here by JavaScript -->
        </div>
    </div>

    <!-- The Modal for full-screen image view -->
    <div id="image-modal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="modal-image">
    </div>

    <script>
        // Use a single window.onload listener to ensure all resources (including CSS) are loaded
        window.onload = function() {

            // --- Light/Dark Mode Toggle Logic ---
            const themeToggleBtn = document.getElementById('theme-toggle');
            const sunIcon = document.getElementById('sun-icon');
            const moonIcon = document.getElementById('moon-icon');
            const body = document.body;

            // Check for saved theme preference in local storage on page load
            const currentTheme = localStorage.getItem('theme');
            if (currentTheme === 'dark') {
                body.classList.add('dark');
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            }

            // Add click listener to the theme toggle button
            themeToggleBtn.addEventListener('click', () => {
                if (body.classList.contains('dark')) {
                    // Switch to light mode
                    body.classList.remove('dark');
                    sunIcon.classList.remove('hidden');
                    moonIcon.classList.add('hidden');
                    localStorage.setItem('theme', 'light');
                } else {
                    // Switch to dark mode
                    body.classList.add('dark');
                    sunIcon.classList.add('hidden');
                    moonIcon.classList.remove('hidden');
                    localStorage.setItem('theme', 'dark');
                }
            });

            // IIFE for the CodePen fish animation logic
            (function () {
                var myoptions
                const fishes = ["ðŸŸ ðŸ  ðŸ¡", "ðŸ¡", "ðŸ ", "ðŸŸ", "ðŸŸ ðŸ  ðŸ¦‘ ðŸ™"]
                var tank = document.getElementById("tank")
                var WINDOW_MIN
                const MIN_THRESHOLD = 650
                var timeouts = [];
            
                // Default options since dat.GUI is removed
                myoptions = {
                    Presets: "Ocean Mix",
                    NumFishGroups: "20",
                    SingleFishOnly: false,
                    MaxPerSchool: "7",
                    ColorChanging: true,
                    PercentSchools: "25",
                    SwimSpeed: "Moderate",
                    FishSpecies: "ðŸŸ ðŸ  ðŸ¡"
                };

                // Event listener for window resize to re-initialize the tank
                window.addEventListener("resize", () => {
                    initializeTank()
                })
            
                /* Fish functions */
                function initializeTank() {
                    WINDOW_MIN = Math.min(tank.clientHeight, tank.clientWidth)
                    generateFishTank()
                    if (WINDOW_MIN <= MIN_THRESHOLD) {
                        // Logic for mobile, if needed
                    }
                }
            
                function generateFishTank() {
                    clearTimeouts()
                    tank.innerHTML = ""
                    for (let i = 0; i < myoptions.NumFishGroups; i++) {
                        let species = pick(myoptions.FishSpecies.split(" "))
                        let numFish = 1
                        if (!myoptions.SingleFishOnly && (Math.random() * 100) > (100 - myoptions.PercentSchools)) {
                            numFish = getRandomInt(1, myoptions.MaxPerSchool)
                        }
                        let hueShift = myoptions.ColorChanging ? getRandomInt(0, 360) : 0
            
                        let school = generateSchool(numFish, species, hueShift)
                        tank.appendChild(school)
                        loop(school)
                    }
                }
            
                function generateSchool(numFish, species, hueShift) {
                    //school position and area
                    let root = document.createElement("div");
                    root.setAttribute("class", "school")
                    root.style.width = `${getRandomFloat(100,1000)}px`
                    root.style.height = `${getRandomFloat(100,700)}px`
                    root.style.left = `${getRandomFloat(0,100)}%`
                    root.style.top = `${getRandomFloat(0,100)}%`
            
                    //fish sizes
                    let maxFishSize = WINDOW_MIN < MIN_THRESHOLD ? 50 : 80
                    let minFishSize = WINDOW_MIN < MIN_THRESHOLD ? 5 : 10
                    let staticSize = getRandomInt(minFishSize, maxFishSize / 2)
                    let allSameSize = numFish > 1 && Math.random() > .7
            
                    //size and color the fish and position them randomly in the school
                    for (let i = 0; i < numFish; i++) {
                        let fishPos = [getRandomFloat(0, 100), getRandomFloat(0, 100)]
                        let size = allSameSize ? staticSize : getRandomInt(minFishSize, maxFishSize)
                        let fish = generateFish(fishPos, hueShift, size, species)
                        root.appendChild(fish);
                    }
                    return root
                }
            
                function loop(school) {
                    let timeout = school.getAttribute('data-timeout')
                    clearTimeout(timeout)
                    let minInterval = myoptions.SwimSpeed == "Slow" ? 10000 : myoptions.SwimSpeed == "Moderate" ? 5000 : 3000
                    let maxInterval = myoptions.SwimSpeed == "Slow" ? 30000 : myoptions.SwimSpeed == "Moderate" ? 20000 : 10000
                    let nextCall = getRandomInt(minInterval, maxInterval)
                    moveSchool(school, nextCall)
                    timeout = setTimeout(loop.bind(this, school), nextCall)
                    timeouts.push(timeout)
                    school.setAttribute('data-timeout', timeout)
                }
            
                function moveSchool(school, nextCall) {
                    //move the school as a whole
                    let currentX = parseInt(school.getAttribute("data-x")) || 0
                    let moveMoreVertically = isSquid(school.querySelector(".fish").textContent)
                    let newX = moveMoreVertically ? getRandomFloat(-tank.clientWidth/4, tank.clientWidth/4) : getRandomFloat(-tank.clientWidth, tank.clientWidth)
                    let newY = moveMoreVertically ? getRandomFloat(-tank.clientHeight, tank.clientHeight) : getRandomFloat(-tank.clientHeight / 4, tank.clientHeight / 4)
            
                    const isRight = newX > currentX;
                    let easing = Math.random() > .5 ? "ease" : "ease-in-out"
                    school.style.transition = `transform ${nextCall}ms ${easing}`
                    school.style.transform = `translate(${newX}px, ${newY}px)`
                    school.setAttribute("data-x", newX)
            
                    //correct fish direction if necessary and for >1 fish, shift them around a little in the school
                    let maxTranslationDistance = WINDOW_MIN < MIN_THRESHOLD ? 50 : 100;;
                    [...school.querySelectorAll(".fish")].forEach(fish => {
                        let direction = fish.querySelector(".direction")
                        direction.style.transform = `scaleX(${isRight?-1:1})`
                        direction.style.transition = `transform ${getRandomFloat(.2,.6)}s`
                        if (school.children.length > 1) {
                            let translateX = getRandomFloat(-maxTranslationDistance, maxTranslationDistance)
                            let translateY = getRandomFloat(-maxTranslationDistance, maxTranslationDistance)
                            fish.style.transform = `translateX(${translateX}px) translateY(${translateY}px)`
                            let easing = Math.random() > .5 ? "ease" : "ease-in-out"
                            fish.style.transition = `all ${nextCall}ms ${easing}`
                        }
                    })
                }
            
                function generateFish(pos, hueShift, size, icon) {
                    let htm = `<div class="direction">${icon}</div>`
                    let f = document.createElement("div")
                    f.setAttribute("class", "fish")
                    f.style.filter = `hue-rotate(${hueShift}deg)`
                    f.style.left = `${pos[0]}%`
                    f.style.top = `${pos[1]}%`
                    f.style.fontSize = `${size}px`
                    f.innerHTML = htm
                    return f
                }
            
                /* HELPERS */
                function pick(arr) {
                    return arr[Math.floor(Math.random() * arr.length)];
                }
            
                function getRandomInt(min, max) {
                    min = Math.ceil(min)
                    max = Math.floor(max)
                    return Math.floor(Math.random() * (max - min + 1)) + min
                }
            
                function getRandomFloat(min, max) {
                    return (Math.random() * (max - min)) + min
                }
            
                function isMobile() {
                    let mobile = window.matchMedia(`only screen and (max-width: ${MIN_THRESHOLD}px), only screen and (max-height:${MIN_THRESHOLD}px)`).matches;
                    return mobile || navigator.userAgent.indexOf("Firefox") != -1 || navigator.userAgent.indexOf("Silk") != -1;
                }
            
                function clearTimeouts() {
                    for (var i = 0; i < timeouts.length; i++) {
                        window.clearTimeout(timeouts[i])
                    }
                    timeouts = []
                }
            
                function isSquid(letter) {
                    return /[\u{1f991}\u{1f419}]/u.test(letter)
                }
                
                // Initialize the tank on page load
                initializeTank();
            
            })("sweaverD.com");


            // Gallery generation logic (original script)
            const images = [
                'art-piece-1.jpg',
                'art-piece-2.png',
                'art-piece-3.jpeg',
                'art-piece-4.jpg',
                'art-piece-5.jpg',
                'art-piece-6.png',
                'art-piece-7.jpg',
                'art-piece-8.jpg'
            ];

            const galleryContainer = document.getElementById('gallery-container');
            const modal = document.getElementById('image-modal');
            const modalImage = document.getElementById('modal-image');
            const closeModal = document.querySelector('.close');

            // Function to open the modal
            function openModal(src) {
                modal.style.display = 'flex';
                modalImage.src = src;
            }

            // Function to close the modal
            function hideModal() {
                modal.style.display = 'none';
            }

            // Loop through the image filenames and create the gallery
            images.forEach(filename => {
                // Create a container for each image
                const imageWrapper = document.createElement('div');
                imageWrapper.classList.add('image-item', 'bg-white', 'p-4', 'rounded-lg', 'shadow-md', 'dark:bg-gray-700');

                // Create the image element
                const img = document.createElement('img');
                img.src = `./images/${filename}`;
                img.alt = `Gallery image: ${filename}`;
                img.classList.add('w-full', 'h-auto', 'rounded-lg');
                
                // Add click event listener to open the modal
                img.addEventListener('click', () => {
                    openModal(img.src);
                });

                // Append the image to its wrapper
                imageWrapper.appendChild(img);
                
                // Append the wrapper to the gallery container
                galleryContainer.appendChild(imageWrapper);
            });

            // Close the modal when the close button is clicked
            closeModal.addEventListener('click', hideModal);

            // Close the modal when clicking outside the image
            window.addEventListener('click', (event) => {
                if (event.target === modal) {
                    hideModal();
                }
            });
            
            // Force a resize event after everything has loaded to ensure proper sizing
            window.dispatchEvent(new Event('resize'));
        };
    </script>

</body>
</html>
