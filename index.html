<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frozenslime Studio</title>
    <!-- Use Tailwind CSS for a clean, responsive design -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --rotation-angle: 0deg;
        }
        body {
            /* Full viewport size and background from the CodePen */
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/1197275/oceanBackdrop.jpg);
            background-size: cover;
            background-repeat: no-repeat;
            font-family: 'Inter', sans-serif;
            position: relative; /* Needed for z-index to work */
            transition: background-color 0.3s ease-in-out;
        }

        body.dark {
            background: #111827; /* Dark background color for dark mode */
        }

        /* Container for the fish animation, placed behind all content */
        #tank {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
        }

        /* Styles for the individual fish schools and fish */
        .school {
            position: absolute;
            top: 50%;
            left: 50%;
        }

        .fish {
            position: absolute;
        }
        
        /* Custom styles for the images */
        .single-image-container {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            min-height: 400px; /* Ensure container has a minimum height */
        }

        .single-image {
            max-width: 100%;
            max-height: 70vh; /* Limit height to prevent image from being too large */
            border-radius: 0.5rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s ease-in-out;
            cursor: pointer;
            /* Apply the rotation variable here */
            transform: rotate(var(--rotation-angle));
        }

        /* Styles for the modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.9);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            margin: auto;
            display: block;
            max-width: 90%;
            max-height: 90%;
            animation-name: zoom;
            animation-duration: 0.6s;
        }

        @keyframes zoom {
            from {transform: scale(0.5)}
            to {transform: scale(1)}
        }

        .close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
        }

        .close:hover,
        .close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }

    </style>
</head>
<body class="p-8">

    <!-- Transparent Top Bar with Logo, Title, and Light/Dark Mode Toggle -->
    <header class="fixed top-0 left-0 right-0 p-4 z-50 flex justify-between items-center bg-transparent">
        <div class="flex items-center space-x-2">
            <!-- Site Logo (using an emoji as a simple placeholder) -->
            <span class="text-3xl">ðŸŽ¨</span>
            <!-- Site Title -->
            <h1 class="text-2xl font-bold text-gray-900 dark:text-white transition-colors duration-300">Frozenslime Studio</h1>
        </div>
        <!-- Container for the last updated text and light/dark mode toggle button -->
        <div class="flex items-center space-x-4">
            <span id="last-updated" class="text-sm text-gray-600 dark:text-gray-300 transition-colors duration-300"></span>
            <!-- Light/Dark Mode Toggle Button -->
            <button id="theme-toggle" class="p-2 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors duration-300 focus:outline-none">
                <!-- Sun icon for light mode, Moon icon for dark mode -->
                <svg id="sun-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
                <svg id="moon-icon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                </svg>
            </button>
        </div>
    </header>

    <!-- Container for the animated fish tank -->
    <!-- This div will contain the fish and will be the background -->
    <div id="tank"></div>

    <!-- Gallery Container -->
    <div class="max-w-4xl mx-auto relative z-10 p-4 rounded-xl bg-white bg-opacity-70 dark:bg-gray-800 dark:bg-opacity-80 shadow-2xl mt-20 transition-colors duration-300">
        <h1 class="text-4xl font-extrabold text-gray-800 dark:text-white text-center mb-4">My Art Gallery</h1>
        <!-- Single Image Display Container -->
        <div id="single-image-container" class="single-image-container">
            <img id="single-image" class="single-image" src="" alt="Gallery Image">
        </div>
        
        <!-- Navigation and Counter -->
        <div class="flex justify-center items-center space-x-4 mt-4">
            <!-- Rotation button - Counter-clockwise -->
            <button id="rotate-ccw-btn" class="p-2 bg-gray-200 dark:bg-gray-700 rounded-full shadow hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-700 dark:text-gray-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20.3 4.7l-1.3 1.3M17 12a5 5 0 1 1-10 0 5 5 0 0 1 10 0zM12 2a10 10 0 0 1 8 5.6M12 22a10 10 0 0 0 8-5.6"/>
                    <path d="M12 22v-4M22 12h-4"/>
                </svg>
            </button>

            <button id="prev-btn" class="p-2 bg-gray-200 dark:bg-gray-700 rounded-full shadow hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-700 dark:text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
            </button>
            <span id="image-counter" class="text-lg font-semibold text-gray-800 dark:text-gray-200"></span>
            <button id="next-btn" class="p-2 bg-gray-200 dark:bg-gray-700 rounded-full shadow hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-700 dark:text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
            </button>
            
            <!-- Rotation button - Clockwise -->
            <button id="rotate-cw-btn" class="p-2 bg-gray-200 dark:bg-gray-700 rounded-full shadow hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-700 dark:text-gray-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3.7 4.7l1.3 1.3M7 12a5 5 0 1 0 10 0 5 5 0 0 0-10 0zM12 2a10 10 0 0 0-8 5.6M12 22a10 10 0 0 1-8-5.6"/>
                    <path d="M12 22v-4M2 12h4"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- The Modal for full-screen image view -->
    <div id="image-modal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="modal-image">
    </div>

    <script>
        // IIFE for the CodePen fish animation logic
        (function () {
            var myoptions
            const fishes = ["ðŸŸ ðŸ  ðŸ¡", "ðŸ¡", "ðŸ ", "ðŸŸ", "ðŸŸ ðŸ  ðŸ¦‘ ðŸ™"]
            var tank = document.getElementById("tank")
            var WINDOW_MIN
            const MIN_THRESHOLD = 650
            var timeouts = [];
        
            // Default options since dat.GUI is removed
            myoptions = {
                Presets: "Ocean Mix",
                NumFishGroups: "20",
                SingleFishOnly: false,
                MaxPerSchool: "7",
                ColorChanging: true,
                PercentSchools: "25",
                SwimSpeed: "Moderate",
                FishSpecies: "ðŸŸ ðŸ  ðŸ¡"
            };
        
            // Event listener for window resize to re-initialize the tank
            window.addEventListener("resize", () => {
                // Only re-initialize if not in dark mode
                if (!document.body.classList.contains('dark')) {
                    initializeTank();
                }
            })
        
            /* Fish functions */
            window.initializeTank = function() {
                WINDOW_MIN = Math.min(tank.clientHeight, tank.clientWidth)
                generateFishTank()
                if (WINDOW_MIN <= MIN_THRESHOLD) {
                    // Logic for mobile, if needed
                }
            }
        
            function generateFishTank() {
                clearTimeouts()
                tank.innerHTML = ""
                for (let i = 0; i < myoptions.NumFishGroups; i++) {
                    let species = pick(myoptions.FishSpecies.split(" "))
                    let numFish = 1
                    if (!myoptions.SingleFishOnly && (Math.random() * 100) > (100 - myoptions.PercentSchools)) {
                        numFish = getRandomInt(1, myoptions.MaxPerSchool)
                    }
                    let hueShift = myoptions.ColorChanging ? getRandomInt(0, 360) : 0
        
                    let school = generateSchool(numFish, species, hueShift)
                    tank.appendChild(school)
                    loop(school)
                }
            }
        
            function generateSchool(numFish, species, hueShift) {
                //school position and area
                let root = document.createElement("div");
                root.setAttribute("class", "school")
                root.style.width = `${getRandomFloat(100,1000)}px`
                root.style.height = `${getRandomFloat(100,700)}px`
                root.style.left = `${getRandomFloat(0,100)}%`
                root.style.top = `${getRandomFloat(0,100)}%`
        
                //fish sizes
                let maxFishSize = WINDOW_MIN < MIN_THRESHOLD ? 50 : 80
                let minFishSize = WINDOW_MIN < MIN_THRESHOLD ? 5 : 10
                let staticSize = getRandomInt(minFishSize, maxFishSize / 2)
                let allSameSize = numFish > 1 && Math.random() > .7
        
                //size and color the fish and position them randomly in the school
                for (let i = 0; i < numFish; i++) {
                    let fishPos = [getRandomFloat(0, 100), getRandomFloat(0, 100)]
                    let size = allSameSize ? staticSize : getRandomInt(minFishSize, maxFishSize)
                    let fish = generateFish(fishPos, hueShift, size, species)
                    root.appendChild(fish);
                }
                return root
            }
        
            function loop(school) {
                let timeout = school.getAttribute('data-timeout')
                clearTimeout(timeout)
                let minInterval = myoptions.SwimSpeed == "Slow" ? 10000 : myoptions.SwimSpeed == "Moderate" ? 5000 : 3000
                let maxInterval = myoptions.SwimSpeed == "Slow" ? 30000 : myoptions.SwimSpeed == "Moderate" ? 20000 : 10000
                let nextCall = getRandomInt(minInterval, maxInterval)
                moveSchool(school, nextCall)
                timeout = setTimeout(loop.bind(this, school), nextCall)
                timeouts.push(timeout)
                school.setAttribute('data-timeout', timeout)
            }
        
            function moveSchool(school, nextCall) {
                //move the school as a whole
                let currentX = parseInt(school.getAttribute("data-x")) || 0
                let moveMoreVertically = isSquid(school.querySelector(".fish").textContent)
                let newX = moveMoreVertically ? getRandomFloat(-tank.clientWidth/4, tank.clientWidth/4) : getRandomFloat(-tank.clientWidth, tank.clientWidth)
                let newY = moveMoreVertically ? getRandomFloat(-tank.clientHeight, tank.clientHeight) : getRandomFloat(-tank.clientHeight / 4, tank.clientHeight / 4)
        
                const isRight = newX > currentX;
                let easing = Math.random() > .5 ? "ease" : "ease-in-out"
                school.style.transition = `transform ${nextCall}ms ${easing}`
                school.style.transform = `translate(${newX}px, ${newY}px)`
                school.setAttribute("data-x", newX)
        
                //correct fish direction if necessary and for >1 fish, shift them around a little in the school
                let maxTranslationDistance = WINDOW_MIN < MIN_THRESHOLD ? 50 : 100;;
                [...school.querySelectorAll(".fish")].forEach(fish => {
                    let direction = fish.querySelector(".direction")
                    direction.style.transform = `scaleX(${isRight?-1:1})`
                    direction.style.transition = `transform ${getRandomFloat(.2,.6)}s`
                    if (school.children.length > 1) {
                        let translateX = getRandomFloat(-maxTranslationDistance, maxTranslationDistance)
                        let translateY = getRandomFloat(-maxTranslationDistance, maxTranslationDistance)
                        fish.style.transform = `translateX(${translateX}px) translateY(${translateY}px)`
                        let easing = Math.random() > .5 ? "ease" : "ease-in-out"
                        fish.style.transition = `all ${nextCall}ms ${easing}`
                    }
                })
            }
        
            function generateFish(pos, hueShift, size, icon) {
                let htm = `<div class="direction">${icon}</div>`
                let f = document.createElement("div")
                f.setAttribute("class", "fish")
                f.style.filter = `hue-rotate(${hueShift}deg)`
                f.style.left = `${pos[0]}%`
                f.style.top = `${pos[1]}%`
                f.style.fontSize = `${size}px`
                f.innerHTML = htm
                return f
            }
        
            /* HELPERS */
            function pick(arr) {
                return arr[Math.floor(Math.random() * arr.length)];
            }
        
            function getRandomInt(min, max) {
                min = Math.ceil(min)
                max = Math.floor(max)
                return Math.floor(Math.random() * (max - min + 1)) + min
            }
        
            function getRandomFloat(min, max) {
                return (Math.random() * (max - min)) + min
            }
        
            function isMobile() {
                let mobile = window.matchMedia(`only screen and (max-width: ${MIN_THRESHOLD}px), only screen and (max-height:${MIN_THRESHOLD}px)`).matches;
                return mobile || navigator.userAgent.indexOf("Firefox") != -1 || navigator.userAgent.indexOf("Silk") != -1;
            }
        
            window.clearTimeouts = function() {
                for (var i = 0; i < timeouts.length; i++) {
                    window.clearTimeout(timeouts[i])
                }
                timeouts = []
                // Clear all fish elements from the tank
                tank.innerHTML = "";
            }
        
            function isSquid(letter) {
                return /[\u{1f991}\u{1f419}]/u.test(letter)
            }
        
        })("sweaverD.com");


        // Use a single window.onload listener to ensure all resources (including CSS) are loaded
        window.onload = function() {
            // Add a slight delay to ensure the DOM has fully rendered and dimensions are available
            setTimeout(() => {
                // --- Light/Dark Mode Toggle Logic ---
                const themeToggleBtn = document.getElementById('theme-toggle');
                const sunIcon = document.getElementById('sun-icon');
                const moonIcon = document.getElementById('moon-icon');
                const body = document.body;
    
                // Check for saved theme preference in local storage on page load
                const currentTheme = localStorage.getItem('theme');
                if (currentTheme === 'dark') {
                    body.classList.add('dark');
                    sunIcon.classList.add('hidden');
                    moonIcon.classList.remove('hidden');
                    // If in dark mode on load, clear the fish animation
                    clearTimeouts();
                } else {
                    // If in light mode, initialize the fish animation
                    initializeTank();
                }
                
                // --- FIX: Explicitly dispatch a resize event to ensure correct initial rendering ---
                window.dispatchEvent(new Event('resize'));
    
                // Add click listener to the theme toggle button
                themeToggleBtn.addEventListener('click', () => {
                    if (body.classList.contains('dark')) {
                        // Switch to light mode
                        body.classList.remove('dark');
                        sunIcon.classList.remove('hidden');
                        moonIcon.classList.add('hidden');
                        localStorage.setItem('theme', 'light');
                        // Start the fish animation
                        initializeTank();
                    } else {
                        // Switch to dark mode
                        body.classList.add('dark');
                        sunIcon.classList.add('hidden');
                        moonIcon.classList.remove('hidden');
                        localStorage.setItem('theme', 'dark');
                        // Stop the fish animation
                        clearTimeouts();
                    }
                });
    
                // Gallery logic for single image display
                const images = [
                    '0C0FC1B5-DAE5-4ADA-ABB9-86718A8DB63E.JPG',
                    '0D661B86-E9CF-431A-8A47-1E22FBC7D6D6.JPG',
                    '05BE4AFF-45EC-4392-AF2B-0D41974C3D05.JPG',
                    '6F8A9068-C23B-4020-B9C9-B8C8A6B570A4.JPG',
                    '7DE70559-617E-4116-A577-0F0EBEA14DC9.JPG',
                    '8B987D5C-6F7E-4B02-94EA-0EC7E99451A0.JPG',
                    '9B48B8C1-B5F1-46BA-8160-6241932F3692.JPG',
                    '15D47E03-2B93-4892-B47C-BFC38EF19859.JPG',
                    '46B99BCA-C195-461D-98CC-9B8C3B28A66C.JPG',
                    '54A05201-C062-4A49-B8DE-E197D083C509.jpg',
                    '6136732D-3A39-41AF-9045-583C9B64994D.JPG',
                    '20240828_105217.jpg',
                    '20240828_105247.jpg',
                    '20240828_105536.jpg',
                    '53934BAE-45B4-4809-8DF1-EE01A73D097A.JPG',
                    '655466ED-7C19-4A4F-A1D1-673679E3776B.JPG',
                    '20240828_105827.jpg',
                    '20240828_105703.jpg',
                    '20240828_105715.jpg',
                    '20240828_105800.jpg',
                    '20240828_105949.jpg',
                    '20240828_110017.jpg',
                    '20240828_110256.jpg',
                    '20240828_110339.jpg',
                    'A0E5043D-FDB2-4FA5-A636-48E253F74F3C.JPG',
                    'BA9E2783-1805-4CBF-9680-53FCA209D55C.JPG',
                    'BED24477-86C1-4482-8A95-A6B5FFB92ADE.jpg',
                    'C4CDE0CF-F3D7-4EA7-92B5-F21EFF01C41E.JPG',
                    'DA1099D5-9969-4D6F-8509-ED76608EB310.JPG',
                    'D9A5AA3B-D70D-4480-95CA-780E79688009.JPG',
                    'E84CC888-4D1D-4D16-AF56-5666C6339ED2.JPG',
                    'EC293388-1DC2-4546-8EDC-D29B2DC920F9.JPG',
                    'F3A8ED64-EFFC-42FC-A847-E082B2C6C213.JPG',
                    'FF66D793-6F9D-4BC8-815B-93598BC7F41F.JPG',
                    'FFEE7BCA-00AA-4C52-9F40-30A57DFADEAA.JPG',
                    'E6CBB324-B23F-4280-A0B8-587D64CA7360.JPG',
                    'F3FADACA-BC2B-400D-81A7-3661EF9F9468.JPG',
                    'FBE45984-0311-4808-B719-54E9E65D3984.JPG'
                ];
                
                let currentIndex = 0; // State variable to track the current image index
                let rotationAngle = 0; // State variable for image rotation
    
                const singleImage = document.getElementById('single-image');
                const prevBtn = document.getElementById('prev-btn');
                const nextBtn = document.getElementById('next-btn');
                const imageCounter = document.getElementById('image-counter');
                const rotateCwBtn = document.getElementById('rotate-cw-btn');
                const rotateCcwBtn = document.getElementById('rotate-ccw-btn');
                const lastUpdatedSpan = document.getElementById('last-updated');
    
                const modal = document.getElementById('image-modal');
                const modalImage = document.getElementById('modal-image');
                const closeModal = document.querySelector('.close');
    
                // Function to render the current image and update the counter
                function renderImage() {
                    singleImage.src = `./images/${images[currentIndex]}`;
                    imageCounter.textContent = `${currentIndex + 1} of ${images.length}`;
                    updateImageRotation();
                }
    
                // Function to show the previous image
                function showPrevImage() {
                    currentIndex = (currentIndex - 1 + images.length) % images.length;
                    renderImage();
                }
    
                // Function to show the next image
                function showNextImage() {
                    currentIndex = (currentIndex + 1) % images.length;
                    renderImage();
                }
    
                // Function to open the modal
                function openModal(src) {
                    modal.style.display = 'flex';
                    modalImage.src = src;
                }
    
                // Function to close the modal
                function hideModal() {
                    modal.style.display = 'none';
                }
                
                // Function to update the image rotation based on the current angle
                function updateImageRotation() {
                    document.documentElement.style.setProperty('--rotation-angle', `${rotationAngle}deg`);
                }
                
                // Function to rotate the image clockwise
                function rotateImageClockwise() {
                    rotationAngle = (rotationAngle + 90) % 360;
                    updateImageRotation();
                }
    
                // Function to rotate the image counter-clockwise
                function rotateImageCounterClockwise() {
                    rotationAngle = (rotationAngle - 90) % 360;
                    updateImageRotation();
                }
    
                // Function to display the last updated date
                function updateLastUpdated() {
                    const now = new Date();
                    const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
                    const formattedDate = now.toLocaleDateString('en-US', options);
                    lastUpdatedSpan.textContent = `Last updated: ${formattedDate}`;
                }
    
                // Event listeners for navigation buttons
                prevBtn.addEventListener('click', showPrevImage);
                nextBtn.addEventListener('click', showNextImage);
                
                // Event listeners for rotation buttons
                rotateCwBtn.addEventListener('click', rotateImageClockwise);
                rotateCcwBtn.addEventListener('click', rotateImageCounterClockwise);
    
                // Add click event listener to the single image to open the modal
                singleImage.addEventListener('click', () => {
                    openModal(singleImage.src);
                });
    
                // Close the modal when the close button is clicked
                closeModal.addEventListener('click', hideModal);
    
                // Close the modal when clicking outside the image
                window.addEventListener('click', (event) => {
                    if (event.target === modal) {
                        hideModal();
                    }
                });
    
                // Event listener for keyboard navigation
                window.addEventListener('keydown', (event) => {
                    // If the modal is open, we don't want the keyboard navigation to work on the gallery
                    if (modal.style.display === 'flex') {
                        // Close the modal with Escape key
                        if (event.key === 'Escape') {
                            hideModal();
                        }
                        return;
                    }
    
                    if (event.key === 'ArrowLeft') {
                        showPrevImage();
                    } else if (event.key === 'ArrowRight') {
                        showNextImage();
                    } else if (event.key === 'ArrowUp') {
                        rotateImageClockwise();
                    } else if (event.key === 'ArrowDown') {
                        rotateImageCounterClockwise();
                    }
                });
    
                // Initial render
                renderImage();
                updateLastUpdated();
            }, 100); // Small delay to allow the page to fully render
        };
    </script>

</body>
</html>
